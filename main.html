<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>FCL Explantory Visualization</title>

    <link rel="stylesheet" href="css/main.css"/>
    <link rel="stylesheet" href="css/slider.css"/>
    <link rel="stylesheet" href="css/zoomable_circles.css"/>
    <link rel="stylesheet" href="css/tooltip.css"/>
    <link rel="stylesheet" href="css/sliding_menuBar.css"/>
    <link rel="stylesheet" href="css/google_map.css"/>

    <script src="//d3js.org/d3.v3.min.js"></script>
    <script src="js/lib/topojson.v1.min.js"></script>

</head>

<body>

<script>

    var pop_layer = false;
    var co2_layer = false;
    var project_layer = false;
    var network_layer = false;
    var staff_layer = false;
    var google_layer = false;

    function newInput(){

        //tooltip.style("visibility","hidden");
        //d3.selectAll(".navg_button").classed("selectedBtn",false);

        if(this.id){
            var holder = this.parentNode.id;
            var the_ul = d3.select("#"+holder).selectAll("ul");


            switch(this.id){
                case 'pop_densityBtn':

                            category = "Population Density";
                             this.classList.toggle("selectedBtn");
                             the_ul.style("height","93px");
                             var res  = d3.select(this).classed("selectedBtn");


                        if(res){
                            //remove the co2_layer to avoid multi-layer exist at the same time

                            if(co2_layer){
                                d3.select("#co2_emissionBtn").classed("selectedBtn",false);
                                co2_layer = false;
                                d3.select("#co2_emissionHolder").selectAll("ul").style("height","0");
                                remove_layer('.co2_layer');

                            }

                            pop_layer = true;
                            the_ul.style("height","93px");
                            load_DData(category);
                        }else{
                            pop_layer = false;
                            the_ul.style("height","0");
                            remove_layer('.pop_layer');
                            if(!(pop_layer|co2_layer)) redraw_worldmap();
                        }
                    break;
                case 'co2_emissionBtn': category = "CO2 Emission";
                    this.classList.toggle("selectedBtn");
                    var res  = d3.select(this).classed("selectedBtn");

                    if(res){
                        if(pop_layer){

                            document.getElementById("pop_densityBtn").classList.toggle("selectedBtn");
                            pop_layer = false;
                            d3.select("#pop_densityHolder").selectAll("ul").style("height","0");
                            remove_layer('.pop_layer');
                        }

                        co2_layer = true;
                        the_ul.style("height","93px");
                        load_DData(category);
                    }else{
                        co2_layer = false;
                        the_ul.style("height","0");
                        remove_layer('.co2_layer');
                        if(!(pop_layer|co2_layer)) redraw_worldmap();
                    }
                    break;

                case  'fcl_projectsBtn': //category = "FCL Projects";

                    //if(!(pop_layer|co2_layer)) draw_worldmap();
                    this.classList.toggle("selectedBtn");
                    var res  = d3.select(this).classed("selectedBtn");

                    if(res){
                        project_layer = true;
                        load_google_map();
                        load_DData("FCL Projects");
                    }else{
                        project_layer = false;
                        remove_layer('.project_layer');
                    }
                    break;

                case 'global_networkBtn': //category = "Global Network";
                    //if(!(pop_layer|co2_layer)) draw_worldmap();
                    this.classList.toggle("selectedBtn");
                    var res  = d3.select(this).classed("selectedBtn");

                    if(res){
                        network_layer = true;
                        load_DData("Global Network");
                    }else{
                        network_layer = false;
                        remove_layer('.network_layer');
                    }
                    break;

                case 'academic_staffBtn': //category = "Global Network";

                    this.classList.toggle("selectedBtn");
                    var res  = d3.select(this).classed("selectedBtn");

                    if(res){
                        staff_layer = true;
                        load_DData("Academic Staff");
                    }else{
                        staff_layer = false;
                        remove_layer('.staff_layer');
                    }
                    break;


                default: break;
            }


            //d3.select(this).classed("selectedBtn",true);
        }else{
            d3.select("#pop_densityBtn").classed("selectedBtn",true);
        }

    }

    /* Set the width of the side navigation to 250px */
    function openNav() {
        document.getElementById("mySidenav").style.width = "160px";
    }

    /* Set the width of the side navigation to 0 */
    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }


</script>

<div id="content_holder">

    <nav class = "menu_bar">
        <div class="menu-item" style="padding: 10px; border-top: 0">
            <img id="fcl_logo" src="img/Logo_FCLwhite.png" alt="fcl_logo" width="180px" height="40px">
        </div>

        <div class="menu-item navg_button" id="pop_densityHolder">
            <h4 id ="pop_densityBtn"><a>  Population Density</a></h4>
            <ul>
                <li><div class="color_slider"></div></li>
            </ul>
        </div>

        <div class="menu-item navg_button" id="co2_emissionHolder">
            <h4 id = "co2_emissionBtn"><a>  CO2 Emission Per Capita</a></h4>
            <ul>
                <li></li>
            </ul>
        </div>


    </nav>


    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()" style="border-bottom:0 solid red;">&times;</a>
        <a href="#" id="fcl_projectsBtn"> FCL Projects</a>
        <a href="#" id="global_networkBtn">Global Network</a>
        <a href="#" id="academic_staffBtn">Academic Staff</a>
        <a href="#" id="google_mapBtn">Google Map</a>
        <a href="http://www.fcl.ethz.ch/" target="_blank" style="text-decoration:underline;color:dodgerblue;">FCL Website</a>
    </div>

    <!-- Use any element to open the sidenav -->
    <span id ="openBtn" onclick="openNav()">F<br>C<br>L</span>


    <div id="map_container">
        <!--<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3988.7830112895026!2d103.78620331459703!3d1.3052853620809883!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31da1a431841d5f1%3A0x160f705c61acdff3!2ssixty40!5e0!3m2!1sen!2ssg!4v1466989919758" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>-->
    </div>

</div>


<script>
document.getElementById("content_holder").style.height=  window.innerHeight+'px';
document.getElementById('pop_densityBtn').addEventListener("click", newInput);
document.getElementById('co2_emissionBtn').addEventListener("click", newInput);
document.getElementById('fcl_projectsBtn').addEventListener("click", newInput);
document.getElementById('global_networkBtn').addEventListener("click", newInput);
document.getElementById('academic_staffBtn').addEventListener("click", newInput);
document.getElementById('google_mapBtn').addEventListener("click",newInput);
</script>

<script src="js/map/world_map.js"></script>
<script src="js/map/population_density_display.js"></script>
<script src="js/slider/timer_slider.js"></script>
<script src="js/slider/color_slider.js"></script>
<script src="js/map/zoomable_circles.js"></script>
<script src="js/google_map/google_map.js"></script>

</body>
</html>