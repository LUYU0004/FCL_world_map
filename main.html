<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>FCL Explantory Visualization</title>

    <link rel="stylesheet" href="css/main.css"/>
    <link rel="stylesheet" href="css/slider.css"/>
    <link rel="stylesheet" href="css/zoomable_circles.css"/>
    <link rel="stylesheet" href="css/tooltip.css"/>
    <link rel="stylesheet" href="css/sliding_menuBar.css"/>

    <script src="//d3js.org/d3.v3.min.js"></script>
    <script src="js/lib/topojson.v1.min.js"></script>
</head>

<body>

<script>

    var pop_layer = false;
    var co2_layer = false;
    var project_layer = false;
    var network_layer = false;
    var staff_layer = false;

    function newInput(){

        tooltip.style("visibility","hidden");
        //d3.selectAll(".navg_button").classed("selectedBtn",false);
        if(this.id){
            var the_ul = d3.select(this).selectAll("ul");


            switch(this.id){
                case 'pop_densityBtn':
                            category = "Population Density";
                             this.classList.toggle("selectedBtn");
                             the_ul.style("height","93px");
                             var res  = d3.select(this).classed("selectedBtn");


                        if(res){
                            //remove the co2_layer to avoid multi-layer exist at the same time
                            remove_layer('.co2_layer');
                            if(co2_layer){
                                d3.select("#co2_emissionBtn").classed("selectedBtn",false);
                                co2_layer = false;
                                d3.select("#co2_emissionBtn").selectAll("ul").style("height","0");

                            }

                            pop_layer = true;
                            load_DData(category);
                        }else{
                            pop_layer = false;
                            the_ul.style("height","0");
                            remove_layer('.pop_layer');
                        }
                    break;
                case 'co2_emissionBtn': category = "CO2 Emission";
                    this.classList.toggle("selectedBtn");
                    var res  = d3.select(this).classed("selectedBtn");

                    if(res){
                        if(pop_layer){

                            document.getElementById("pop_densityBtn").classList.toggle("selectedBtn");
                            pop_layer = false;
                            d3.select("#pop_densityBtn").selectAll("ul").style("height","0");
                            remove_layer('.pop_layer');
                        }

                        co2_layer = true;
                        the_ul.style("height","93px");
                        load_DData(category);
                    }else{
                        co2_layer = false;
                        the_ul.style("height","0");
                        remove_layer('.co2_layer');
                    }
                    break;
                case  'fcl_projectsBtn': //category = "FCL Projects";

                    this.classList.toggle("selectedBtn");
                    var res  = d3.select(this).classed("selectedBtn");

                    if(res){
                        project_layer = true;
                        load_DData("FCL Projects");
                    }else{
                        project_layer = false;
                        remove_layer('.project_layer');
                    }
                    break;
                case 'global_networkBtn': //category = "Global Network";
                    this.classList.toggle("selectedBtn");
                    var res  = d3.select(this).classed("selectedBtn");

                    if(res){
                        network_layer = true;
                        load_DData("Global Network");
                    }else{
                        network_layer = false;
                        remove_layer('.network_layer');
                    }
                    break;

                case 'academic_staffBtn': //category = "Global Network";
                    this.classList.toggle("selectedBtn");
                    var res  = d3.select(this).classed("selectedBtn");

                    if(res){
                        staff_layer = true;
                        load_DData("Academic Staff");
                    }else{
                        staff_layer = false;
                        remove_layer('.staff_layer');
                    }
                    break;

                default: break;
            }


            //d3.select(this).classed("selectedBtn",true);
        }else{
            d3.select("#pop_densityBtn").classed("selectedBtn",true);
        }

    }

    /* Set the width of the side navigation to 250px */
    function openNav() {
        document.getElementById("mySidenav").style.width = "160px";
    }

    /* Set the width of the side navigation to 0 */
    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }


</script>

<div id="content_holder">

    <nav class = "menu_bar">
        <div class="menu-item" style="padding: 10px; border-top: 0">
            <img id="fcl_logo" src="res/fcl_logo.png" alt="fcl_logo" width="180px" height="40px">
        </div>

        <div class="menu-item navg_button" id="pop_densityBtn">
            <h4><a>  Population Density</a></h4>
            <ul>
                <li><div class="color_slider"></div></li>
            </ul>
        </div>

        <div class="menu-item navg_button" id="co2_emissionBtn">
            <h4><a>  CO2 Emission Per Capita</a></h4>
            <ul>
                <li></li>
            </ul>
        </div>


    </nav>


    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()" style="border-bottom:0px solid red;">&times;</a>
        <a href="#" id="fcl_projectsBtn"> FCL Projects</a>
        <a href="#" id="global_networkBtn">Global Network</a>
        <a href="#" id="academic_staffBtn">Academic Staff</a>
        <a href="http://www.fcl.ethz.ch/" target="_blank" style="text-decoration:underline;color:dodgerblue;">FCL Website</a>
    </div>

    <!-- Use any element to open the sidenav -->
    <span id ="openBtn" onclick="openNav()">F<br>C<br>L</span>


    <div id="map_container">
    </div>

</div>


<script>
document.getElementById("content_holder").style.height=  window.innerHeight+'px';
document.getElementById('pop_densityBtn').addEventListener("click", newInput);
document.getElementById('co2_emissionBtn').addEventListener("click", newInput);
document.getElementById('fcl_projectsBtn').addEventListener("click", newInput);
document.getElementById('global_networkBtn').addEventListener("click", newInput);
document.getElementById('academic_staffBtn').addEventListener("click", newInput);
</script>

<script src="js/map/world_map.js"></script>
<script src="js/map/population_density_display.js"></script>
<script src="js/slider/timer_slider.js"></script>
<script src="js/map/zoomable_circles.js"></script>


</body>
</html>